var WochengSDK = function () {
    function p() {
        var b = null;
        if (window.XMLHttpRequest) b = new XMLHttpRequest, b.overrideMimeType && b.overrideMimeType("text/xml"); else if (window.ActiveXObject) try {
            b = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (f) {
            try {
                b = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (d) {
            }
        }
        return b
    }

    function C(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u7528\u6237\u8ba2\u5355\u4fe1\u606f\u67e5\u8be2url:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 ==
                    a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (q++, q == h.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(h[q - 1], h[q]);
                    c(g);
                    C(g, f, d)
                }
            };
            a.send()
        }
    }

    function E(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u9000\u8ba2url:" + b);
            a.open("POST", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[POST\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (r++,
                    r == h.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(h[r - 1], h[r]);
                    c(g);
                    x(g, f, d)
                }
            };
            a.send()
        }
    }

    function x(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u8ba2\u8d2d\u8bb0\u5f55\u67e5\u8be2url:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (t++, t == h.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}');
                else {
                    var g = b.replace(h[t - 1], h[t]);
                    c(g);
                    x(g, f, d)
                }
            };
            a.send()
        }
    }

    function D(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u9274\u6743url:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (u++, u == h.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(h[u - 1], h[u]);
                    c(g);
                    D(g, f, d)
                }
            };
            a.send()
        }
    }

    function z(b, f, d, a) {
        var e =
            p();
        if (null != e) {
            c("\u8ba1\u8d39url\uff1a" + b);
            e.open("POST", b, d);
            var g = setTimeout(function () {
                e.abort()
            }, 1E4);
            e.onreadystatechange = function () {
                c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 xmlHttp.readyState:" + e.readyState);
                c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 xmlHttp.status:" + e.status);
                if (4 == e.readyState) if (200 == e.status) {
                    clearTimeout(g);
                    c("[\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42post\u8bf7\u6c42\u6210\u529f]");
                    var k = e.responseXML;
                    k.getElementsByTagName("flag") ? (y = k.getElementsByTagName("flag")[0].childNodes[0].nodeValue,
                        c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42flag :" + y + "--URL:" + b), k = "http://payIP:9031/webpay/pay_options".replace(/payIP/, v[m]) + "?flag=" + y, window.location = k) : (m++, m == v.length ? (c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 \u7b2c\u4e00\u4e8c\u6b65\u90fd\u5931\u8d25 A"), a(0, "out of service")) : (k = b.replace(v[m - 1], v[m]), z(k, f, d, a)))
                } else m++, m == v.length ? (c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 \u7b2c\u4e00\u4e8c\u6b65\u90fd\u5931\u8d25 B"), a(0, "out of service")) : (k = b.replace(v[m - 1], v[m]), z(k, f, d, a))
            };
            e.send(f)
        }
    }

    function A(b, f, d, a) {
        var e = p();
        if (null != e) {
            e.open("POST", b, d);
            var g = setTimeout(function () {
                e.abort()
            }, 1E4);
            e.onreadystatechange = function () {
                if (4 == e.readyState) if (200 == e.status) {
                    clearTimeout(g);
                    c("[\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42post\u8bf7\u6c42\u6210\u529f]");
                    var k = e.responseText;
                    c("OrderProduct\u54cd\u5e94\u6570\u636e\uff1a" + k);
                    k = eval("(" + k + ")");
                    1 == k.result ? (c("\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42:" + k.result), c("\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42:" + k.orderId),
                        a(1, k.orderId)) : (n++, n == h.length ? (c("ip\u5207\u6362\u7ed3\u675f"), a(0, "out of service")) : (k = b.replace(h[n - 1], h[n]), A(k, f, d, a)))
                } else n++, n == h.length ? (c("ip\u5207\u6362\u7ed3\u675f"), a(0, "out of service")) : (k = b.replace(h[n - 1], h[n]), A(k, f, d, a))
            };
            e.send(f)
        }
    }

    var m = 0, u = 0, n = 0, t = 0, r = 0, q = 0, h = ["124.132.254.85"], v = ["124.132.254.85", "124.132.254.85"], y,
        c = function (b) {
            console.log(b)
        };
    this.doOrderProduct = function (b, f, d, a, e, g, k, l, p, q, r, t, u, x, y, B, w) {
        b || (b = "unknown");
        f || (f = "unknown");
        d ? a ? e ? g ? k ? l ? (x || (x = "unknown"),
        y || (y = "unknown"), B || (B = "unknown"), c("payVersion:" + payVersion), c("payChannelId:" + payChannelId), c("payAppId:" + payAppId), c("payAppName:" + payAppName), c("payUA:" + payUA), c("payAccessType:" + payAccessType), n = 0, b = "http://vacIP:12324/api/v1.0/buyOrder".replace(/vacIP/, h[n]) + "/" + b + "/" + a + "/" + e + "/" + d + "/" + f + "/" + x + "/" + y + "?platform=" + B, c("\u4e0b\u8ba2\u5355:" + b), A(b, null, !0, function (a, b) {
            1 == a ? (a = '<?xml version="1.0" encoding="UTF-8"?><request><body><Version>' + payVersion + "</Version><ChannelId>" + payChannelId + "</ChannelId><AppId>" +
                payAppId + "</AppId><AppName>" + payAppName + "</AppName><PropName>" + e + "</PropName><PropPrice>" + g + "</PropPrice><ExData>" + b + "</ExData><UA>" + payUA + "</UA><redirecturl>" + k + "</redirecturl><failurl>" + l + "</failurl><broadbandid>" + p + "</broadbandid><AccessType>" + payAccessType + "</AccessType><param1>" + d + "</param1><param2>" + q + "</param2><param3>" + r + "</param3><param4>" + t + "</param4><param5>" + u + "</param5></body></request>", c("\u6253\u5f00\u8ba1\u8d39\u9875\u9762\u62fc\u63a5:" + a), m = 0, z("http://payIP:9031/webpay/pay".replace(/payIP/,
                v[m]), a, !0, w)) : w(0, "order Product error")
        })) : w(0, "failUrl error") : w(0, "redirectUrl error") : w(0, "price error") : w(0, "contentName error") : w(0, "contentId error") : w(0, "customerId error")
    };
    this.doGetProducts = function (b, c, d, a, e, g) {
        if (b) if (c) {
            d || (d = ["unknown"]);
            a || (a = "unknown");
            e || (e = ["unknown"]);
            for (var f = "", l = 0; l < d.length; l++) f = l == d.length - 1 ? f + d[l] : f + (d[l] + "-");
            d = "";
            for (l = 0; l < e.length; l++) d = l == e.length - 1 ? d + e[l] : d + (e[l] + "-");
            u = 0;
            e = "http://vacIP:12324/api/v1.0/product".replace(/vacIP/, h[u]);
            D(e + "?contentId=" +
                b + "&customerId=" + c + "&productId=" + f + "&userCode=" + a + "&productIdThird=" + d, !0, g)
        } else g(0, "customerId error"); else g(0, "contentId is empty")
    };
    this.doListUserOrders = function (b, c) {
        if (b) {
            t = 0;
            var d = "http://vacIP:12324/api/v1.0/order/".replace(/vacIP/, h[t]);
            x(d + b, !0, c)
        } else c(0, "customerId error")
    };
    this.doUnsubscribe = function (b, c, d, a, e, g) {
        if (b) if (c || (c = "unknown"), d) {
            a || (a = "unknown");
            e || (e = "unknown");
            r = 0;
            var f = "http://vacIP:12324/api/v1.0/manager/unsubscribe/".replace(/vacIP/, h[r]);
            E(f + b + "/" + d + "/" + c + "/" + a +
                "/" + e, !0, g)
        } else g(0, "contentId error"); else g(0, "customerId error")
    };
    this.doGetOrderInfo = function (b, c, d) {
        if (b) if (c) {
            q = 0;
            var a = "http://vacIP:12324/api/v1.0/order/user/".replace(/vacIP/, h[q]);
            C(a + b + "/" + c, !0, d)
        } else d(0, "orderId error"); else d(0, "customerId error")
    }
}, sdk = new WochengSDK;