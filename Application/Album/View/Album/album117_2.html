<!DOCTYPE html>
<html>
<head>
    <title>专辑117_2-江苏电信</title>
    <meta charset="utf-8" name="page-view-size" content="{$size}"/>

    <link rel="stylesheet" type="text/css" href="__ROOT__/Public/css/Common/Album/album117_2.css?t={$time}"/>
    <link rel="stylesheet" href="__ROOT__/Public/css/{$platformType}/Album/common/countdown_new.css?t={$time}"/>

    <!--第三方解析库-->
    <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/json2.js?t={$time}"></script>
    <if condition="$carrierId eq '520092'"><!--贵州广电引用-->
        <script type="text/javascript"
                src="http://epg.interface.gzgd/nn_cms/data/webapp/common/gzgd.config.js?t={$time}"></script>
        <script type="text/javascript"
                src="http://epg.interface.gzgd/nn_cms/data/webapp/common/starcorCom.js?t={$time}"></script>
        <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/520094/gzgd.config.js?t={$time}"></script>
        <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/520094/starcorCom.js?t={$time}"></script>
    </if>
    <!--公用库-->
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmcommon.js?t={$time}"></script>
    <eq name="isRunOnAndroid" value="1">
        <script type="text/javascript" src="__ROOT__/Public/Common/js/android.js?t={$time}"></script>
    </eq>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmui.js?t={$time}"></script>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmplayer.js?t={$time}"></script>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmauthEx.js?t={$time}"></script>
    <if condition="$carrierId eq '450094' ">
        <!-- 广西广电小窗视频播放 -->
        <script type="text/javascript" src="http://10.1.15.25/webJS/gxgd.config.js?t={$time}"></script>
        <script type="text/javascript" src="http://10.1.15.25/webJS/starcorCom.js?t={$time}"></script>
    </if>
    <!--当前模块js-->
    <script type="text/javascript" src="__ROOT__/Public/js/Album/album.1.01.js?t={$time}"></script>
    <script type="text/javascript" src="__ROOT__/Public/js/Player/LMSmallPlayer.js?t={$time}"></script>

</head>
<body id="body" class="{$platformType}-body">
<div id="debug"></div>
<if condition="$carrierId neq 640094">
    <a href="#" id="default_link"></a>
</if>

<div id="tab-content" class="{$platformType}-tab-content">

</div>
<img id="v-prev" class="{$platformType}-v-arrow {$platformType}-v-prev"
     src="__ROOT__/Public/img/hd/Album/album117_2/icon_prev_page.png"/>
<img id="v-next" class="{$platformType}-v-arrow {$platformType}-v-next"
     src="__ROOT__/Public/img/hd/Album/album117_2/icon_next_page.png"/>
<img id="more" class="{$platformType}-more" src="__ROOT__/Public/img/hd/Album/album117_2/bg_more_video.png"/>
<img id="back" class="{$platformType}-back" useType="back"
     src="__ROOT__/Public/img/hd/Album/album117_2/bg_back.png"/>
<div id="history-album" class="{$platformType}-history-album">

</div>

<div id="purchase-dialog" style="visibility:hidden">
    <img class="purchase-dialog-img" src="__ROOT__/Public/img/{$platformType}/Album/common/bg_purchase_dialog.png">
    <img id="btn-purchase" src="__ROOT__/Public/img/{$platformType}/Album/common/btn_purchase_focus.png">
    <img id="btn-cancel-purchase" src="__ROOT__/Public/img/{$platformType}/Album/common/btn_cancel_purchase.png">
</div>
<!--<img id="a-prev" class="{$platformType}-a-arrow {$platformType}-a-prev"
src="__ROOT__/Public/img/{$platformType}/Album/album117_2/icon_prev_page1.png"/>
<img id="a-next" class="{$platformType}-a-arrow {$platformType}-a-next"
src="__ROOT__/Public/img/{$platformType}/Album/album117_2/icon_next_page1.png"/>-->
<script type="text/javascript">
    var buttonTemp = [];
    // TP框架控制器返回数据应用
    var TP = {
        vip: {$isVip},
        listMovePages: {$moveNum},           // 页数
        albumMovePages: {$moveAlbumNum},
        userId: '{$userId}',
        focusIDName: '{$focus_index}' == 'focus-1-1' ? 'focus-1' : '{$focus_index}',
        videoData: {$data}.data.video_list,  // 专题节目列表
        platformType: '{$platformType}',     // hd--高清 sd--标清
        lmcid: '{$carrierId}',
        inner: '{$inner}',
        fromLaunch: "{$fromLaunch}",
        albumName: '{$albumName}',          // 专辑名称
        domainUrl: '{$domainUrl}',           // 江苏电信需要使用的第三方播放器前缀地址\
        atFreeTime: {$atFreeTime}, // 当前专辑跳转视频播放页面是否已经观看完免费时长 1--已观看 0--未观看
        commonImgPath: '__ROOT__/Public/img/{$platformType}/Album/common/', // 公用图片文件地址
    };

    // 本专辑控制器参数传递
    var param = {
        imgPrefixIndex: '__ROOT__/Public/img/hd/Album/album117_2/',
        buttons: [],
        V: TP.platformType == 'hd' ? 5 : 4,  // 渲染视频列表个数
        A: 4,                                // 渲染往期专辑的个数
        allVideoLength: 6,                   // 视频列表的总个数
        hasSmallVideo: false,    // 是否有小窗播放
        listVideoDirection: 'right',         // Video列表下一个翻页方向
        historyAlbum: false,
        // 视频列表焦点移动方向
        firstAndLastListItemMove: {
            prev: 'videoTv',
            next: '',
            up: 'more',
            down: 'album1',
            left: '',
            right: ''
        },
        // 往期专题焦点移动方向
        firstAndLastAlbumItemMove: {
            prev: 'videoTv',
            next: '',
            up: 'focus-1',
            down: '',
            left: '',
            right: ''
        },
        // 更多精彩焦点移动方向
        moreItemMove: {
            up: '',
            down: 'focus-1',
            left: 'videoTv',
            right: 'back'
        },
        // 返回焦点移动方向
        backItemMove: {
            up: '',
            down: 'focus-1',
            left: 'more',
            right: ''
        },
        // 小窗视频焦点移动方向
        videoTvItemMove: {
            up: 'focus-1',
            down: '',
            left: '',
            right: 'focus-1'
        },
        backPage: TP.lmcid == '000051' ? 'homeTab4' : 'home',
        backHomeTabNumber: '4',
        morePageName: 'channel', // 设置查看更多跳转路径
        // 设置往期专辑索引,不同区域不同专辑
        setAlbumIndex: (function () {
            var a = 81,
                    b = 101,
                    c = 104;
            return [
                {index: a, album: 'album' + a},
                {index: b, album: 'album' + b},
                {index: c, album: 'album' + c},
                {index: 'more', album: 'more'}];
        }()),
        // 钩子函数->解决不同区域背景图和已知差异化
        different: function () {
            var bodyBg = 'bg_album.png';
            switch (TP.lmcid) {
                case '630092':
                case '640092':
                    bodyBg = 'bg_album.png';
                    this.morePageName = 'MenuTabLevelThree'; // 设置宁夏、青海电信查看更多跳转地址
                    break;
                case '450094':
                    this.hasSmallVideo = false;
                    bodyBg = 'bg_album_no_video.png';
                    G('videoTv').parentNode.removeChild(G('videoTv')); // 广西广电没有视频小窗
                    this.imgPrefixIndex = '__ROOT__/Public/img/hd/Album/album117_2/six_item/';
                    this.allVideoLength = 6;
                    this.backHomeTabNumber = 4;
                    break;
                case '320092': // 江苏电信没有免费图标
                case '420092': // 湖北电信没有免费图标
                case '520094': // 贵州广电没有免费图标
                    S('hd-free');
                    break;
                case '650092':
                    this.imgPrefixIndex = '__ROOT__/Public/img/hd/Album/album117_2/six_item/';
                    this.allVideoLength = 6;
                    this.backHomeTabNumber = 4;
                    break;
                default:
                    bodyBg = 'bg_album.png';
                    break;
            }
            TP.platformType == 'sd' && (bodyBg = 'sd_bg_album.png');
            G('body').style.backgroundImage = 'url(' + this.imgPrefixIndex + bodyBg + ')';
        },
        // 钩子函数->焦点移动
        hookMoveFocus: function (key, btn) {
        },
    };

    var Temp = {
        checkTryWatchEnd: function () {
            if (!Boolean(TP.vip) && TP.atFreeTime == '1') {
                // 普通用户观看免费时长结束，弹出计费页
                Temp.showDialog();
                LMEPG.ButtonManager.init('btn-purchase', buttonTemp, '', true);
            }
        },

        showDialog: function () {
            S('purchase-dialog');
        },

        cancelPurchaseVIP: function (btn) {
            Temp.hidePurchaseDialog();
        },

        hidePurchaseDialog: function () {
            H('purchase-dialog');
            LMEPG.ButtonManager.requestFocus("focus-1");
        },


        tempBtn: function () {
            buttonTemp.push(
                    {
                        id: 'btn-purchase',
                        name: '立即订购',
                        type: 'img',
                        nextFocusLeft: 'btn-cancel-purchase',
                        nextFocusRight: 'btn-cancel-purchase',
                        nextFocusDown: '',
                        nextFocusUp: '',
                        backgroundImage: TP.commonImgPath + 'btn_purchase.png',
                        focusImage: TP.commonImgPath + 'btn_purchase_focus.png',
                        beforeMoveChange: '',
                        focusChange: '',
                        click: window.App.jumpBuyVip,
                    }, {
                        id: 'btn-cancel-purchase',
                        name: '取消订购',
                        type: 'img',
                        nextFocusLeft: 'btn-purchase',
                        nextFocusRight: 'btn-purchase',
                        nextFocusDown: '',
                        nextFocusUp: '',
                        backgroundImage: TP.commonImgPath + 'btn_cancel_purchase.png',
                        focusImage: TP.commonImgPath + 'btn_cancel_purchase_focus.png',
                        beforeMoveChange: '',
                        focusChange: '',
                        click: Temp.hidePurchaseDialog,
                    }
            )
            LMEPG.BM.addButtons(buttonTemp);
        }
    }


    // 调用模块总成函数
    App.init(param);
    Temp.tempBtn();
    Temp.checkTryWatchEnd();
    lmInitGo();
</script>
</body>
</html>