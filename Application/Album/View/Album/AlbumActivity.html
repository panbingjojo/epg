<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>39精选</title>
    <link rel="stylesheet" type="text/css" href="__ROOT__/Public/css/{$platformType}/Activity/ActivityLoseWeight/V5/introduce.css?t={$time}"/>
    <!--公共库-->
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmcommon.js?t={$time}"></script>
    <eq name="isRunOnAndroid" value="1">
        <script type="text/javascript" src="__ROOT__/Public/Common/js/android.js?t={$time}"></script>
    </eq>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmui.js?t={$time}"></script>

    <style type="text/css">
        /*body {*/
        /*position: relative;*/
        /*background-color: transparent;*/
        /*width: 1280px;*/
        /*height: 720px;*/
        /*}*/

        /*#img-current {*/
        /*position: absolute;*/
        /*top: 0;*/
        /*left: 0;*/
        /*width: 1280px;*/
        /*height: 720px;*/
        /*}*/

        /*img.arrow {*/
        /*position: absolute;*/
        /*top: 50%;*/
        /*z-index: 2;*/
        /*}*/

        /*#left-arrow {*/
        /*left: 10px;*/
        /*}*/

        /*#right-arrow {*/
        /*right: 10px;*/
        /*}*/
    </style>
</head>
<body style="background-image: url('../../../../Public/img/{$platformType}/Activity/ActivityLoseWeight/V5/picture_bg.png');">
<div id="debug"></div>
<img class="arrow" src="__ROOT__/Public/img/{$platformType}/Activity/ActivityLoseWeight/V5/left_page.png"
     id="left-arrow"/>
<img class="arrow" src="__ROOT__/Public/img/{$platformType}/Activity/ActivityLoseWeight/V5/right_page.png"
     id="right-arrow"/>
<img id="img-current" src="">
<div id="pages">3/5</div>
<script>
    var ItemPicture = {
        data: {$data}.data.video_list[0].content_desc,
        page: 0,
        maxPage: 0,
        buttons: [],
        init: function () {
            this.createBtns();
            this.maxPage = this.data.length - 1;
            this.renderImg();
            LMEPG.ButtonManager.init('img-current', this.buttons, '', true);
        },
        createBtns: function () {
            this.buttons = [
                {
                    id: 'back',
                    name: '返回',
                    type: 'img',
                    nextFocusDown: 'focus-1',
                    click: onBack,
                    backgroundImage: g_appRootPath + '/Public/img/hd/Menu/QHotherPages/back.png',
                    focusImage: g_appRootPath + '/Public/img/hd/Menu/QHotherPages/back_f.png'
                }, {
                    id: 'img-current',
                    name: '图文容器',
                    type: 'img',
                    nextFocusDown: 'focus-1',
                    beforeMoveChange: this.onBeforeMoveChange
                }];
        },
        onBeforeMoveChange: function (key, btn) {

            if (key == 'left') {
                ItemPicture.prevPage();
            }
            if (key == 'right') {
                ItemPicture.nextPage();
            }
        },
        renderImg: function () {
            G('img-current').src = '{$resourcesUrl}' + this.data[this.page];
            this.toggleArrow();
        },
        prevPage: function () {
            this.page = Math.max(0, this.page -= 1);
            this.renderImg();
        },
        nextPage: function () {
            this.page = Math.min(this.maxPage, this.page += 1);
            this.renderImg();
        },
        toggleArrow: function () {
            S('left-arrow');
            S('right-arrow');
            this.page == 0 && H('left-arrow');
            this.page == this.maxPage && H('right-arrow');
            console.log(this.page, this.maxPage);
            G("pages").innerHTML = (this.page + 1) + "/" + (this.maxPage + 1);
        }
    };
    ItemPicture.init();

    function onBack() {
        LMEPG.Intent.back();
    }
</script>
</body>
</html>