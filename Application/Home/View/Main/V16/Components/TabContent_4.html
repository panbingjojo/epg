<div id="user-container">
    <img id="user-pic" src="__ROOT__/Public/img/hd/Home/V13/Home/Tab3/unvip.png">
    <p id="user-account"></p>
    <img id="join-vip" src="__ROOT__/Public/img/hd/Home/V16/Home/Tab3/join_vip.png">
    <if condition="($carrierId eq '000051') AND (($areaCode eq '216') OR ($areaCode eq '207') OR ($areaCode eq '209') OR ($areaCode eq '204') OR ($areaCode eq '208')) AND ($isVip eq 0)">
        <img id="join-vip-corner" src="__ROOT__/Public/img/hd/Home/V16/Home/Tab3/join_vip_corner.png">
    </if>
</div>
<div id="record-container">
    <img id="tab3-link-1">
    <img id="tab3-link-2">
    <img id="tab3-link-3">
    <img id="tab3-link-4">
    <img id="tab3-link-5">
    <img id="tab3-link-6">
</div>
<div id="tab3-help" class="tab-help-wrap">
    <img id="tab4-help0" src="__ROOT__/Public/img/{$platformType}/Help/V13/tab3_help0.png">
    <img id="tab4-help1" src="__ROOT__/Public/img/{$platformType}/Help/V13/tab3_help1.png">
    <img id="tab4-help2" src="__ROOT__/Public/img/{$platformType}/Help/V13/tab3_help2.png">
    <img id="tab4-help3" src="__ROOT__/Public/img/{$platformType}/Help/V13/tab3_help3.png">
    <!--<img id="tab3-help4" src="__ROOT__/Public/img/{$platformType}/Help/V13/tab3_help4.png">-->
</div>
<script type="text/javascript">
    var Tab4 = {
        isLoad:false,
        init: function () {
            Tab4.renderTab4();
            this.createBtns();
        },
        /**
         * 渲染Tab4
         */
        renderTab4: function () {
            // 辽宁电信隐藏“我的”tab页面
            if (RenderParam.carrierId == '210092') {
                var item = G("content-3");
                item.parentNode.removeChild(item);
                item = G("tab-3");
                item.parentNode.removeChild(item);
                return;
            }
            //
            G('user-account').innerHTML = '账户ID：' + RenderParam.accountId;
            // 如果是vip，隐藏加入会员按钮
            if (RenderParam.isVip == 1) {
                H('join-vip');
                G('user-pic').src = g_appRootPath+ '/Public/img/hd/Home/V13/Home/Tab3/vip.png';
            }
            var configList = RenderParam.configInfo.data.entry_list;
            var recommendCount = 0;
            for (var i = 0; i < configList.length; i++) {
                var configItem = configList[i].item_data;
                var configItem0ImgUrl = JSON.parse(configItem[0].img_url);
                switch (parseInt(configList[i].position)) {
                    case 41:
                        G('tab3-link-1').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                    case 42:
                        G('tab3-link-2').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                    case 43:
                        G('tab3-link-3').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                    case 44:
                        G('tab3-link-4').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                    case 45:
                        G('tab3-link-5').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                    case 46:
                        G('tab3-link-6').src = Page.getImg(configItem0ImgUrl.normal);
                        recommendCount += 1;
                        break;
                }
                var index = parseInt(configList[i].position) - 40;
                if (index >= 1 && index <= 6) {
                    var tab3LinkX = Page.getButtonById('tab3-link-' + index);
                    if (tab3LinkX != null) {
                        tab3LinkX.backgroundImage = Page.getImg(configItem0ImgUrl.normal);
                        tab3LinkX.focusImage = Page.getImg(configItem0ImgUrl.focus_in);
                    }
                }
            }

            for (var j = recommendCount + 1; j <= tab3RecommendCount; j++) {
                var tabRecommendId = 'tab3-link-' + j;
                Hide(tabRecommendId);
            }
        },
        onClickJumpPage: function (btn) {
            var curObj = getCurPageObj();
            var jumpId = {
                'collect-record': 'collect',
                'play-record': 'historyPlay',
                'family-record': 'familyEdit',
                'seek-record': 'seekOnLineRecord',
                'order-record': 'expertRecordHome',
                'debook-record': 'debook'
            };
            if (RenderParam.platformType == 'sd' && btn.id == "order-record") {
                LMEPG.UI.showToast('不支持的盒子类型！', 1.5);
                return;
            }
            var dstObj = LMEPG.Intent.createIntent(jumpId[btn.id]);
            LMEPG.Intent.jump(dstObj, curObj);
        },
        createBtns: function () {
            buttons.push({
                id: 'join-vip',
                type: 'img',
                name: '加入会员',
                nextFocusUp: 'tab-4',
                nextFocusRight: 'tab3-link-1',
                backgroundImage:g_appRootPath+  '/Public/img/hd/Home/V16/Home/Tab3/join_vip.png',
                focusImage: g_appRootPath+ '/Public/img/hd/Home/V16/Home/Tab3/join_vip_f.png',
                click: PageJump.jumpBuyVip,
                focusChange: this.onFocusIn
            }, {
                id: 'tab3-link-1',
                type: 'img',
                name: '推荐位1',
                nextFocusUp: 'tab-4',
                nextFocusDown: G('tab3-link-4').style.display !== 'none' ? 'tab3-link-4' : '',
                nextFocusLeft: RenderParam.isVip == 0 ? 'join-vip' : "",
                nextFocusRight: 'tab3-link-2',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 41
            }, {
                id: 'tab3-link-2',
                type: 'img',
                name: '推荐位2',
                nextFocusUp: 'tab-4',
                nextFocusDown: G('tab3-link-5').style.display !== 'none' ? 'tab3-link-5' : '',
                nextFocusLeft: 'tab3-link-1',
                nextFocusRight: 'tab3-link-3',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 42
            }, {
                id: 'tab3-link-3',
                type: 'img',
                name: '推荐位3',
                nextFocusUp: 'tab-4',
                nextFocusDown: G('tab3-link-6').style.display !== 'none' ? 'tab3-link-6' : '',
                nextFocusLeft: 'tab3-link-2',
                nextFocusRight: G('tab3-link-4').style.display !== 'none' ? 'tab3-link-4' : '',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 43
            }, {
                id: 'tab3-link-4',
                type: 'img',
                name: '推荐位4',
                nextFocusUp: 'tab3-link-1',
                nextFocusLeft: RenderParam.isVip == 0 ? 'join-vip' : "",
                nextFocusRight: G('tab3-link-5').style.display !== 'none' ? 'tab3-link-5' : '',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 44
            }, {
                id: 'tab3-link-5',
                type: 'img',
                name: '推荐位5',
                nextFocusUp: 'tab3-link-2',
                nextFocusLeft: 'tab3-link-4',
                nextFocusRight: 'tab3-link-6',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 45
            }, {
                id: 'tab3-link-6',
                type: 'img',
                name: '推荐位6',
                nextFocusUp: 'tab3-link-3',
                nextFocusLeft: 'tab3-link-5',
                click: Page.onClickRecommendPosition,
                focusChange: this.onFocusIn,
                cPosition: 46
            });
        },
        onFocusIn: function (btn, hasFocus) {
            return;
            var btnElement = G(btn.id);
            if (hasFocus) {
                btnElement.setAttribute('class', 'focus');
            } else {
                btnElement.removeAttribute('class');
            }
        }
    };
</script>
