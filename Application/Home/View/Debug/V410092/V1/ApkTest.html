<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>河南电信EPG调用APK</title>
    <link rel="stylesheet" type="text/css" href="__ROOT__/Public/css/{$platformType}/common.css?t={$time}"/>

    <!--全局渲染参数-->
    <script type="text/javascript">
        var RenderParam = {
            //公共渲染
            carrierId: "{$carrierId}",          // 地区id
            areaCode: "{$areaCode}",            // 省份地区码
            subAreaCode: "{$subAreaCode}",      // 省份下的子区域
            platformType: "{$platformType}",    // 平台类型
            debug: "{$debug}",                  // 调试模式
            pageSize: "{$size}",                // 页面尺寸
            stbModel: "{$stbModel}",            // 盒子的型号
            fsUrl: "{$resourcesUrl}",           // fs 地址
            time: "{$time}",                    // 开始渲染时间
            isVip: {$isVip},                    // 用户是不是vip，1 -- 是vip
            userId: "{$userId}",                // 用户Id
            accountId: "{$accountId}",          // 用户Id
            returnUrl: "{$returnUrl}",          // 父页面
            focusId: "{$focusId}",              // 默认焦点

            //当前页渲染
            appName: "{$appName}",
            appUrl: "{$appUrl}",
        }
    </script>

    <!--第三方依赖库-->
    <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/json2.js?t={$time}"></script>
    <!--公用库-->
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmcommon.js?t={$time}"></script>
<eq name="isRunOnAndroid" value="1">
    <script type="text/javascript" src="__ROOT__/Public/Common/js/android.js?t={$time}"></script>
</eq>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmui.js?t={$time}"></script>
    <!--BSLauncher项目中Web端调用apk js-->
    <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/410092/BSLauncher_utils.js?t={$time}"></script>

    <style type="text/css">
        #downloadOrOpenAPK {
            position: absolute;
            width: 200px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            font-size: 19px;
            background: #FFFFFF;
            left: 20px;
            top: 50px;
        }

        #onerror {
            position: absolute;
            font-size: 19px;
            background: #FFFFFF;
            left: 20px;
            top: 150px;
        }
    </style>
</head>
<body style="background-image: url('__ROOT__/Public/img/{$platformType}/Common/{$commonImgsView}/bg_home.png');
    background-Repeat: no-repeat; width: 1280px;height: 720px;position: relative;">
<div id="debug" style=" display: block;color:white;z-index:999;"></div>
<div id="downloadOrOpenAPK">下载或打开APK</div>
<div id="onerror">no error!</div>
<!--提示弹框-->
<div id="default_tip"></div>
</body>

<script type="text/javascript">
    buttons = [
        {
            id: 'downloadOrOpenAPK',
            name: '下载或打开APK',
            type: 'img',
            nextFocusLeft: '',
            nextFocusRight: 'installApk',
            focusChange: onFocusBtn,
            click: onClick,
        }];

    function onFocusBtn(btn, hasFocus) {
        if (hasFocus == true) {
            G(btn.id).style.background = 'blue';
            G(btn.id).style.color = '#ffffff';
        } else {
            G(btn.id).style.background = '#ffffff';
            G(btn.id).style.color = 'black';
        }
    }

    function onClick(btn) {
        switch (btn.id) {
            case "downloadOrOpenAPK":
                downloadOrOpenAPK();
                break;
            default:
                LMEPG.UI.showToast("不支持该操作");
        }

    }
</script>

<script type="text/javascript">
    var debug = document.getElementById("debug");

    function downloadOrOpenAPK() {
        HybirdCallBackInterface.appOpenOrDownload("http://222.85.91.211:10101/plugin_guizhougd_test.apk",
            "com.longmaster.iptv.healthplugin.video.guizhougd",
            "39健康-视频问诊");
    }

    //页面加载完成
    window.onload = function () {
        // 初始焦点在第一个
        LMEPG.ButtonManager.init('downloadOrOpenAPK', buttons, '', true);

        if (typeof HybirdCallBackInterface == "undefined") {
            debug.innerHTML = "HybirdCallBackInterface undefined";
        } else {
            debug.innerHTML = "HybirdCallBackInterface start test";
        }
    };

    // 页面错误
    window.onerror = function (message, filename, lineno) {
        var errorLog = '[ApkTest.js]::error --->' + '\nmessage:' + message + '\nfile_name:' + filename + '\nline_NO:' + lineno;
        LMEPG.Log.error('window.onerror:' + errorLog);
        G("onerror").innerHTML = 'window.onerror:' + errorLog;
    };

    function onBack() {
        window.location.href = "{$homeUrl}";
    }
</script>
</html>