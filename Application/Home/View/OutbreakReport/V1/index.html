<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>疫情播报</title>
    <!--公用库-->
    <script>
        Root = "__ROOT__";
        var RenderParam = {
            isVip: {$isVip},  //当前用户是否VIP
            userId: '{$userId}',    // 当前用户ID
            carrierId: "{$carrierId}",          // 地区id
            platformType: '{$platformType}',     // hd--高清 sd--标清
            lmcid: '{$carrierId}',  // 所属地区Id
            domainUrl: '{$domainUrl}',           // 江苏电信需要使用的第三方播放器前缀地址\
            focusIndex: "{$focusIndex2}",                        // 焦点ID
            areaCode: "{$areaCode}",          // 省份地区码
            lmp: "{$lmp}",          // 省份地区码
            CWS_HLWYY_URL: "{$cwsHlwyyUrl}",
            mapTime: "{$mapTime}",
            isExitApp: '{$isExitApp}',                   // 是否需要退出应用
            overSeaMapTime: "{$mapTime}",
            epidemicDetails: {$epidemicDetails}, // 疫情详情
            historyLength: "{$historyLength}",
            splashHistory: "{$splashHistory}", // 获取欢迎页在浏览器中的历史步长
            fromLaunch:"{$fromLaunch}",
            epidemicReportId:"epidemicReportId"
        };
    </script>

    <if condition="$carrierId eq '410092' ">
        <!--河南电信EPG js文件-->
        <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/410092/vod_utils.js?t={$time}"></script>
    </if>
    <if condition="$carrierId eq '440004' ">
        <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/440004/WebViewJavascriptBridge.js"></script>
    </if>
    <!--第三方依赖库-->
    <script type="text/javascript" src="__ROOT__/Public/ThirdParty/js/json2.js?t={$time}"></script>
    <link rel="stylesheet" type="text/css" href="__ROOT__/Public/css/{$platformType}/common.css?t={$time}"/>
    <link rel="stylesheet" type="text/css" href="__ROOT__/Public/css/hd/OutbreakReport/V1/index.css?t={$time}">
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmcommon.js?t={$time}"></script>
<eq name="isRunOnAndroid" value="1">
    <script type="text/javascript" src="__ROOT__/Public/Common/js/android.js?t={$time}"></script>
</eq>
    <script type="text/javascript" src="__ROOT__/Public/Common/js/lmui.js?t={$time}"></script>
    <script type="text/javascript" src="__ROOT__/Public/js/OutbreakReport/V1/index.js?t={$time}"></script>

</head>
<body>
<!--背景-->
<img id="indexBg"/>
<!--模态框-->
<div id="second-model">
</div>

<div class="map-box">
    <img id="map" src="__ROOT__/Public/img/hd/OutbreakReport/V1/map_box.png" alt="地区">
    <div style="z-index:999;color: #333;position: absolute;left: 10px;top: 5px">来源：腾讯健康小程序</div>
</div>

<div id="real-time-data" class="intro"></div>

<div class="btn-group">
    <img id="btn-1" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_1.png">
    <img id="btn-2" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_2.png">
    <img id="btn-3" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_3.png">
    <img id="btn-4" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_4.png">
    <!--<br>-->
    <!--<img id="btn-5" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_5.png">-->
    <!--<img id="btn-6" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_6.png">-->
    <!--<img id="btn-7" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_7.png">-->
    <!--<img id="btn-8" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_8.png">-->
    <!--<img id="btn-9" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_9.png">-->
    <!--<img id="btn-10" class="btn" src="__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_10.png">-->
</div>
<div id="sw-1" class="sw-show">
</div>
<div id="sw-2" class="sw-show">
</div>
<script>
    window.onload = function () {
        Page.init();
        if(RenderParam.carrierId === "440001"){
            uploadVideoData();
        }
    }
    if (RenderParam.carrierId == "410092") {
        LMEPG.Log.info('init HybirdCallBackInterface !!!!!');
        try {
            HybirdCallBackInterface.setCallFunction(function (param) {
                LMEPG.Log.info('HybirdCallBackInterface param : ' + JSON.stringify(param));
                if (param.tag == HybirdCallBackInterface.EVENT_KEYBOARD_BACK) {
                    LMEPG.Intent.back();
                }
            });
        }catch (e){
            LMEPG.UI.logPanel.show("e");
        }
    }
    if (RenderParam.carrierId == '220094' || RenderParam.carrierId == '220095') {
        G('btn-4').src = "__ROOT__/Public/img/hd/OutbreakReport/V1/bg_btn_11.png"
    }

    function uploadVideoData(){
        LMEPG.ajax.postAPI('Player/getRecommendVideoInfo', null, function (rsp) {
            if(rsp.result === 0){
                var val = JSON.parse(rsp.data[0].ftp_url);
                var data = {
                    startTime:getNowDate() ,
                    contentId:val.gq_ftp_url,
                    contentName:rsp.data[0].title,
                };
                LMEPG.Log.info("uploadData data:"+JSON.stringify(data));
                LMAndroid.jsCallAndroid('doExportContentDetail', JSON.stringify(data), '');
            }
        });
    }
    function getRandom(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function getNowDate() {
        var dateTime=new Date();
        dateTime=dateTime.setSeconds(dateTime.getSeconds()- getRandom(40,120));
        var date = new Date(dateTime);
        var year = date.getFullYear() // 年
        var month = date.getMonth() + 1; // 月
        var day  = date.getDate(); // 日
        var hour = date.getHours(); // 时
        var minutes = date.getMinutes(); // 分
        var seconds = date.getSeconds() //秒
        // 给一位数数据前面加 “0”
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (day >= 0 && day <= 9) {
            day = "0" + day;
        }
        if (hour >= 0 && hour <= 9) {
            hour = "0" + hour;
        }
        if (minutes >= 0 && minutes <= 9) {
            minutes = "0" + minutes;
        }
        if (seconds >= 0 && seconds <= 9) {
            seconds = "0" + seconds;
        }
        var currentdate = year  + month  + day +  hour  + minutes  + seconds;
        return currentdate;
    }
</script>
</body>
</html>